(this["webpackJsonpsas-fe"]=this["webpackJsonpsas-fe"]||[]).push([[20],{1236:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var n=a(93),r=a(4),c=a(54),i=a(14),s=a(8),l=a(1),o=a(995),d=a(48),b=a(1061),u=a(41),j=a(17),O=a(0);var h=function(e){var t=Object(d.a)(),a=Object(j.c)(Object(u.c)(t.palette.primary.main));return Object(O.jsx)("div",{className:"FusePageCarded-header",children:e.header&&Object(O.jsx)(b.a,{theme:a,children:e.header})})},g=a(6),p=a(16),f=a(109),m=a(1071),x=a(1073);var v=function(e){var t=Object(d.a)(),a=Object(j.c)(Object(u.c)(t.palette.primary.main));return Object(O.jsxs)(O.Fragment,{children:[e.header&&Object(O.jsx)(b.a,{theme:a,children:Object(O.jsx)("div",{className:Object(s.a)("FusePageCarded-sidebarHeader",e.variant),children:e.header})}),e.content&&Object(O.jsx)(c.a,{className:"FusePageCarded-sidebarContent",enable:e.innerScroll,children:e.content})]})};function w(e,t){var a=Object(l.useState)(!1),n=Object(p.a)(a,2),r=n[0],c=n[1];Object(l.useImperativeHandle)(t,(function(){return{toggleSidebar:i}}));var i=function(){c(!r)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{lgUp:"permanent"===e.variant,children:Object(O.jsx)(x.a,{variant:"temporary",anchor:e.position,open:r,onOpen:function(e){},onClose:function(e){return i()},disableSwipeToOpen:!0,classes:{root:Object(s.a)("FusePageCarded-sidebarWrapper",e.variant),paper:Object(s.a)("FusePageCarded-sidebar",e.variant,"left"===e.position?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar")},ModalProps:{keepMounted:!0},container:e.rootRef.current,BackdropProps:{classes:{root:"FusePageCarded-backdrop"}},style:{position:"absolute"},children:Object(O.jsx)(v,Object(g.a)({},e))})}),"permanent"===e.variant&&Object(O.jsx)(m.a,{lgDown:!0,children:Object(O.jsx)(f.a,{variant:"permanent",className:Object(s.a)("FusePageCarded-sidebarWrapper",e.variant),open:r,classes:{paper:Object(s.a)("FusePageCarded-sidebar",e.variant,"left"===e.position?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar")},children:Object(O.jsx)(v,Object(g.a)({},e))})})]})}var S,C=Object(l.forwardRef)(w),N=Object(i.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"row",minWidth:0,minHeight:"100%",position:"relative",flex:"1 1 auto",width:"100%",height:"auto",backgroundColor:t.palette.background.default,"& .FusePageCarded-innerScroll":{height:"100%"},"& .FusePageCarded-topBg":{position:"absolute",left:0,right:0,top:0,height:F,background:"linear-gradient(to right, ".concat(t.palette.primary.dark," 0%, ").concat(t.palette.primary.main," 100%)"),backgroundSize:"cover",pointerEvents:"none"},"& .FusePageCarded-contentWrapper":Object(r.a)({display:"flex",flexDirection:"column",padding:"0 3.2rem",flex:"1 1 100%",zIndex:2,maxWidth:"100%",minWidth:0,minHeight:0},t.breakpoints.down("sm"),{padding:"0 1.6rem"}),"& .FusePageCarded-header":{height:I,minHeight:I,maxHeight:I,display:"flex",color:t.palette.primary.contrastText},"& .FusePageCarded-headerSidebarToggleButton":{color:t.palette.primary.contrastText},"& .FusePageCarded-contentCard":{display:"flex",flex:"1 1 100%",flexDirection:"column",backgroundColor:t.palette.background.paper,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",minHeight:0,borderRadius:"20px 20px 0 0"},"& .FusePageCarded-toolbar":{height:R,minHeight:R,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(t.palette.divider)},"& .FusePageCarded-content":{flex:"1 1 auto",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch"},"& .FusePageCarded-sidebarWrapper":{position:"absolute",backgroundColor:"transparent",zIndex:5,overflow:"hidden","&.permanent":Object(r.a)({},t.breakpoints.up("lg"),{zIndex:1,position:"relative"})},"& .FusePageCarded-sidebar":{position:"absolute","&.permanent":Object(r.a)({},t.breakpoints.up("lg"),{backgroundColor:"transparent",position:"relative",border:"none",overflow:"hidden"}),width:P,height:"100%"},"& .FusePageCarded-leftSidebar":{},"& .FusePageCarded-rightSidebar":{},"& .FusePageCarded-sidebarHeader":{height:F,minHeight:F,color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.dark,"&.permanent":Object(r.a)({},t.breakpoints.up("lg"),{backgroundColor:"transparent"})},"& .FusePageCarded-sidebarContent":Object(r.a)({display:"flex",flex:"1 1 auto",flexDirection:"column",backgroundColor:t.palette.background.default,color:t.palette.text.primary},t.breakpoints.up("lg"),{overflow:"auto",WebkitOverflowScrolling:"touch"}),"& .FusePageCarded-backdrop":{position:"absolute"}}})),P=240,F=200,R=64,I=F-R,y=Object(l.forwardRef)((function(e,t){var a=Object(l.useRef)(null),n=Object(l.useRef)(null),r=Object(l.useRef)(null),i=e.rightSidebarHeader||e.rightSidebarContent,d=e.leftSidebarHeader||e.leftSidebarContent;return Object(l.useImperativeHandle)(t,(function(){return{rootRef:r,toggleLeftSidebar:function(){a.current.toggleSidebar()},toggleRightSidebar:function(){n.current.toggleSidebar()}}})),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.a,{styles:function(t){return{"#fuse-main":{height:e.innerScroll&&"100vh"}}}}),Object(O.jsxs)(N,{className:Object(s.a)("FusePageCarded-root",e.innerScroll&&"FusePageCarded-innerScroll",e.className),ref:r,children:[Object(O.jsx)("div",{className:"FusePageCarded-topBg"}),Object(O.jsxs)("div",{className:"flex container w-full",children:[d&&Object(O.jsx)(C,{position:"left",header:e.leftSidebarHeader,content:e.leftSidebarContent,variant:e.leftSidebarVariant||"permanent",innerScroll:e.innerScroll,ref:a,rootRef:r}),Object(O.jsxs)("div",{className:Object(s.a)("FusePageCarded-contentWrapper",d&&(void 0===e.leftSidebarVariant||"permanent"===e.leftSidebarVariant)&&"lg:ltr:pl-0 lg:rtl:pr-0",i&&(void 0===e.rightSidebarVariant||"permanent"===e.rightSidebarVariant)&&"lg:pr-0"),children:[Object(O.jsx)(h,{header:e.header}),Object(O.jsxs)("div",{className:Object(s.a)("FusePageCarded-contentCard",e.innerScroll&&"inner-scroll"),children:[e.contentToolbar&&Object(O.jsx)("div",{className:"FusePageCarded-toolbar",children:e.contentToolbar}),e.content&&Object(O.jsx)(c.a,{className:"FusePageCarded-content",enable:e.innerScroll,scrollToTopOnRouteChange:e.innerScroll,children:e.content})]})]}),i&&Object(O.jsx)(C,{position:"right",header:e.rightSidebarHeader,content:e.rightSidebarContent,variant:e.rightSidebarVariant||"permanent",innerScroll:e.innerScroll,ref:n,rootRef:r})]})]})]})}));y.defaultProps={};var k=Object(l.memo)(Object(i.a)(y)(S||(S=Object(n.a)([""]))))},1322:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(4),c=a(1236),i=a(14),s=a(1200),l=a(1205),o=a(31),d=a(1),b=a(17),u=a(1047),j=a(194),O=a(439),h=a(0);var g=function(e){e.pageLayout,Object(b.b)(),Object(b.c)(O.f);var t=Object(b.c)((function(e){return e.auth.user})),a=Object(d.useState)({id:1,menuEl:null}),r=Object(n.a)(a,2);return r[0],r[1],Object(h.jsx)("div",{className:"flex flex-col justify-between flex-1 min-w-0 px-24 pt-24",children:Object(h.jsxs)("div",{className:"flex items-center min-w-0",children:[t.data.photoURL?Object(h.jsx)(u.a,{className:"w-52 h-52 sm:w-64 sm:h-64",alt:"user photo",src:t.data.photoURL}):Object(h.jsx)(u.a,{className:"w-52 h-52 sm:w-64 sm:h-64",children:t.data.displayName[0]}),Object(h.jsx)("div",{className:"mx-12 min-w-0",children:Object(h.jsxs)(j.a,{className:"text-18 sm:text-24 md:text-32 font-bold leading-none mb-8 tracking-tight",children:["Bentornato, ",t.data.displayName,"!"]})})]})})},p=a(1068),f=a(6),m=a(1026),x=a(1027),v=a(1272),w=a.n(v),S=a(172),C=a(1038),N=a(1197),P=a(1198),F=a(33),R=a(36),I=function(){var e=Object(b.b)(),t=Object(d.useState)("INIT"),a=Object(n.a)(t,2),r=a[0],c=a[1],i=Object(d.useState)(null),s=Object(n.a)(i,2),l=s[0],o=s[1],u=Object(d.useState)(-1),g=Object(n.a)(u,2),p=g[0],v=g[1],I=Object(b.c)((function(e){return e})),y=Object(b.c)((function(e){return e.dashboardManager.widgets.entities.HRCombo})),k=R.a.getPartialPathSync(I);Object(d.useEffect)((function(){c("PENDING"),F.a.getAxiosClient().get("".concat(k,"/queries/listHr")).then((function(e){o(e.data.map((function(e){return e.label=e.value,e}))),c("FULFILL")})).catch((function(e){c("ERROR")}))}),[p]);var H=function(t,a){e(a?Object(O.c)(a):Object(O.c)(null))};return Object(d.useMemo)((function(){return Object(h.jsxs)(S.a,{className:"w-full rounded-20 shadow flex flex-col justify-between",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between px-4 pt-8",children:[Object(h.jsx)(j.a,{className:"text-16 px-16 font-medium",color:"textSecondary",children:y.title}),Object(h.jsx)(x.a,{"aria-label":"more",size:"large",onClick:function(){v((new Date).getMilliseconds())},disabled:"PENDING"===r,children:Object(h.jsx)(m.a,{children:"refresh"})})]}),Object(h.jsxs)("div",{className:"text-center py-12",children:["PENDING"===r?Object(h.jsx)(P.a,{className:"text-orange"}):null,"FULFILL"===r?Object(h.jsx)(N.a,{disablePortal:!0,value:y.selected,options:l,className:"text-center p-12",renderInput:function(e){return Object(h.jsx)(C.a,Object(f.a)(Object(f.a)({},e),{},{label:"Aziende Appaltatrici"}))},onChange:H}):null,"ERROR"===r?Object(h.jsx)(w.a,{color:"error",fontSize:"large"}):null]})]})}),[l,r,y.selected])},y=function(){var e=Object(d.useState)("INIT"),t=Object(n.a)(e,2),a=t[0],r=t[1],c=Object(b.b)(),i=Object(d.useState)(null),s=Object(n.a)(i,2),l=s[0],o=s[1],u=Object(d.useState)(-1),g=Object(n.a)(u,2),p=g[0],v=g[1],I=Object(b.c)((function(e){return e})),y=Object(b.c)((function(e){return e.dashboardManager.widgets.entities.TRCombo})),k=R.a.getPartialPathSync(I);Object(d.useEffect)((function(){r("PENDING"),F.a.getAxiosClient().get("".concat(k,"/queries/listTr")).then((function(e){o(e.data.map((function(e){return e.label=e.value,e}))),r("FULFILL")})).catch((function(e){r("ERROR")}))}),[p]);var H=function(e,t){c(t?Object(O.e)(t):Object(O.e)(null))};return Object(d.useMemo)((function(){return Object(h.jsxs)(S.a,{className:"w-full rounded-20 shadow flex flex-col justify-between",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between px-4 pt-8",children:[Object(h.jsx)(j.a,{className:"text-16 px-16 font-medium",color:"textSecondary",children:y.title}),Object(h.jsx)(x.a,{"aria-label":"more",size:"large",onClick:function(){v((new Date).getMilliseconds())},disabled:"PENDING"===a,children:Object(h.jsx)(m.a,{children:"refresh"})})]}),Object(h.jsxs)("div",{className:"text-center py-12",children:["PENDING"===a?Object(h.jsx)(P.a,{className:"text-orange"}):null,"FULFILL"===a?Object(h.jsx)(N.a,{disablePortal:!0,value:y.selected,options:l,className:"text-center p-12",renderInput:function(e){return Object(h.jsx)(C.a,Object(f.a)(Object(f.a)({},e),{},{label:"Istituti di formazione"}))},onChange:H}):null,"ERROR"===a?Object(h.jsx)(w.a,{color:"error",fontSize:"large"}):null]})]})}),[l,a,y.selected])},k=a(67),H=function(e){var t=Object(b.b)(),a=Object(b.c)((function(e){return e.dashboardManager.widgets.entities.StateComboWidget})),n=function(e,a){t(a?Object(O.d)(a):Object(O.d)(null))};return Object(d.useMemo)((function(){return Object(h.jsxs)(S.a,{className:"w-full rounded-20 shadow flex flex-col justify-between",children:[Object(h.jsx)("div",{className:"flex items-center justify-between px-4 pt-8 mb-24",children:Object(h.jsx)(j.a,{className:"text-16 px-16 font-medium",color:"textSecondary",children:e.widget.title})}),Object(h.jsx)("div",{className:"text-center py-12",children:Object(h.jsx)(N.a,{disablePortal:!0,value:a.selected,options:k.a.valutazione.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0})),className:"text-center p-12",renderInput:function(e){return Object(h.jsx)(C.a,Object(f.a)(Object(f.a)({},e),{},{label:"Stato valutazione"}))},onChange:n})})]})}),[a.selected])},L=a(1190),E=a(1191),D=a(1189),T=a(1187),z=a(1188),M=a(1292),W=a(1304),G=a(1208),A=function(e){var t=e.columns,a=e.data,n=Object(M.useTable)({columns:t,data:a}),r=n.getTableProps,c=n.headerGroups,i=n.rows,s=n.prepareRow;return Object(h.jsxs)(L.a,Object(f.a)(Object(f.a)({},r()),{},{children:[Object(h.jsx)(T.a,{children:c.map((function(e){return Object(h.jsx)(z.a,Object(f.a)(Object(f.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)(D.a,Object(f.a)(Object(f.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(h.jsx)(E.a,{children:i.map((function(e,t){return s(e),Object(h.jsx)(z.a,Object(f.a)(Object(f.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(h.jsx)(D.a,Object(f.a)(Object(f.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})]}))};var U=function(e){var t=Object(b.c)((function(e){var t=e.dashboardManager;return{widget:t.widgets.entities.AssessmentWidget,hrcId:t.widgets.entities.HRCombo.selected,trcId:t.widgets.entities.TRCombo.selected,stato:t.widgets.entities.StateComboWidget.selected}})),a=t.widget,r=t.hrcId,c=t.trcId,i=t.stato,s=Object(d.useMemo)((function(){return[{Header:"Cognome e nome",accessor:"name"},{Header:"Stato",accessor:"stato"},{Header:"Azienda appaltatrice",accessor:"hrc"},{Header:"Istituto di formazioe",accessor:"trc"}]}),[]),l=Object(d.useState)("INIT"),o=Object(n.a)(l,2),u=o[0],O=o[1],g=Object(d.useState)(null),p=Object(n.a)(g,2),v=p[0],C=p[1],N=Object(d.useState)(-1),I=Object(n.a)(N,2),y=I[0],H=I[1],L=Object(b.c)((function(e){return e})),E=R.a.getPartialPathSync(L);Object(d.useEffect)((function(){O("PENDING");var e=[];r&&e.push("hrcId=".concat(r.id)),c&&e.push("trcId=".concat(c.id)),i&&e.push("stato=".concat(i.id)),F.a.getAxiosClient().get("".concat(E,"/queries/groupAssessmentByState").concat(e.length>0?"?".concat(e.join("&")):"")).then((function(e){C(e.data.map((function(e){return{name:k.a.getIndex()[e._id.stato],value:e.value}}))),O("FULFILL")})).catch((function(e){O("ERROR")}))}),[y]);var D=Object(d.useState)("INIT"),T=Object(n.a)(D,2),z=T[0],M=T[1],U=Object(d.useState)(null),B=Object(n.a)(U,2),V=B[0],q=B[1],J=Object(d.useState)(-1),_=Object(n.a)(J,2),K=_[0],Q=_[1],X=Object(d.useState)(1),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(d.useState)(10),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],re=function(e,t){$(t+1)},ce=function(e){ne(parseInt(e.target.value,10)),$(1)};return Object(d.useEffect)((function(){var e=[];r&&e.push("hrcId=".concat(r.id)),c&&e.push("trcId=".concat(c.id)),i&&e.push("stato=".concat(i.id)),Z&&e.push("page=".concat(Z)),ae&&e.push("limit=".concat(ae)),M("PENDING"),F.a.getAxiosClient().get("".concat(E,"/queries/listAssessments").concat(e.length>0?"?".concat(e.join("&")):"")).then((function(e){q(e.data),M("FULFILL")})).catch((function(e){M("ERROR")}))}),[K,Z,ae]),Object(d.useEffect)((function(){H((new Date).getMilliseconds()),Q((new Date).getMilliseconds()),$(1),ne(10)}),[r,c,i]),Object(d.useMemo)((function(){return Object(h.jsx)(S.a,{className:"w-full rounded-20 shadow",children:Object(h.jsxs)("div",{className:"flex flex-row flex-wrap",children:[Object(h.jsxs)("div",{className:"w-full md:w-1/4 p-8 flex-wrap",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between p-20",children:[Object(h.jsx)(j.a,{className:"text-16 font-medium",children:a.title}),Object(h.jsx)(x.a,{"aria-label":"more",size:"large",onClick:function(){H((new Date).getMilliseconds())},disabled:"PENDING"===u,children:Object(h.jsx)(m.a,{children:"refresh"})})]}),"PENDING"===u?Object(h.jsx)(P.a,{className:"text-orange"}):null,"FULFILL"===u?Object(h.jsx)(W.a,{className:"max-h-max min-h-max",option:{tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Stato valutazione",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:v}]}}):null,"ERROR"===u?Object(h.jsx)(w.a,{color:"error",fontSize:"large"}):null]}),Object(h.jsxs)("div",{className:"w-full md:w-3/4 p-8 flex-wrap",children:["PENDING"===z?Object(h.jsx)(P.a,{className:"text-orange"}):null,"FULFILL"===z?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{columns:s,data:V.results.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{stato:k.a.getIndex()[e.stato]})}))}),Object(h.jsx)(G.a,{component:"div",count:V.totalResults,page:V.page-1,onPageChange:re,rowsPerPage:V.limit,onRowsPerPageChange:ce})]}):null,"ERROR"===z?Object(h.jsx)(w.a,{color:"error",fontSize:"large"}):null]})]})})}),[v,u,V,z])};var B=function(){var e=Object(b.c)(O.f),t={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return Object(h.jsxs)(p.a.div,{className:"flex flex-wrap",variants:{show:{transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:[Object(h.jsx)(p.a.div,{variants:t,className:"widget flex w-full max-h-1/3 h-1/3 sm:w-1/2 md:w-1/3 p-12",children:Object(h.jsx)(I,{widget:e.HRCombo})}),Object(h.jsx)(p.a.div,{variants:t,className:"widget flex w-full max-h-1/3 h-1/3 sm:w-1/2 md:w-1/3 p-12",children:Object(h.jsx)(y,{widget:e.TRCombo})}),Object(h.jsx)(p.a.div,{variants:t,className:"widget flex w-full max-h-1/3 h-1/3 sm:w-1/2 md:w-1/3 p-12",children:Object(h.jsx)(H,{widget:e.StateComboWidget})}),Object(h.jsx)(p.a.div,{variants:t,className:"widget flex w-full max-h-1/3 h-1/3 p-12",children:Object(h.jsx)(U,{widget:e.AssessmentWidget})})]})},V=Object(i.a)(c.a)((function(e){var t=e.theme;return{"& .FusePageSimple-header":Object(r.a)({minHeight:160,height:160},t.breakpoints.up("lg"),{marginRight:12,borderBottomRightRadius:20}),"& .FusePageSimple-toolbar":{minHeight:56,height:56,alignItems:"flex-end"},"& .FusePageSimple-rightSidebar":{width:288,border:0,padding:"12px 0"},"& .FusePageSimple-content":{maxHeight:"100%","& canvas":{maxHeight:"100%"}}}}));t.default=function(e){var t=Object(b.b)(),a=Object(b.c)(O.f),r=Object(d.useRef)(null),c=Object(d.useState)(0),i=Object(n.a)(c,2),u=i[0],j=i[1];return Object(d.useEffect)((function(){t(Object(O.b)())}),[t]),o.a.isEmpty(a)?null:Object(h.jsx)(V,{header:Object(h.jsx)(g,{pageLayout:r}),contentToolbar:Object(h.jsx)(l.a,{value:u,onChange:function(e,t){j(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"},children:Object(h.jsx)(s.a,{className:"h-64",disableRipple:!0,label:"Home"})}),content:Object(h.jsx)("div",{className:"p-12 lg:ltr:pr-0 lg:rtl:pl-0",children:0===u&&Object(h.jsx)(B,{})}),ref:r})}}}]);